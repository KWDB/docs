---
title: 集群规划
id: cluster-planning
---

# 集群规划

在集群规划阶段，用户需合理规划集群的拓扑结构、硬件环境、安全性等方面。

## 拓扑结构

在计划部署时，应选择最能满足延迟和弹性要求的拓扑模式：

- 为了提高可用性和降低数据丢失的风险，建议在一台计算机上只运行一个节点。由于 KWDB 跨节点复制，如果一台计算机运行多个节点，当计算机发生故障会增加数据丢失的可能性。
- KWDB 多副本集群的副本数为 3，部署多副本集群时，为确保集群的稳定运行，需要保证集群中正常运行的节点数大于集群的副本数。

## 硬件

每个节点需要配备必要的 CPU、内存、网络和存储等资源。在部署集群前需要检查各个硬件设备。

下表列出部署 KWDB 所需的硬件规格要求。在实际部署时，用户需要根据实际的业务规模和性能要求，规划硬件资源。

| 项目 | 要求 |
| --- | ---- |
| CPU 和内存 | 单节点配置建议不低于 4 核 8G。对于数据量大、复杂的工作负载、高并发和高性能场景，建议配置更高的 CPU 和内存资源以确保系统的高效运行。  |
| 磁盘 | - 推荐使用 SSD 或者 NVMe 设备，尽量避免使用 NFS、CIFS、CEPH 等共享存储。<br>- 使用 HDD 硬盘部署单机版本时，避免设备数过多或每秒写入测点数过高，否则数据写入性能将显著下降；不建议使用 HDD 部署分布式集群版本。<br> - 磁盘至少能够实现 500 IOPS 和 30 MB/s 处理效率。<br> - KWDB 系统自身启动不会占用过多磁盘容量（低于 1G）。实际所需磁盘大小主要取决于用户的业务量。|
| 文件系统  | 建议使用 ext4 文件系统。|

## 安全性

以非安全模式部署的集群存在严重的安全风险：

- 集群对所有客户端都是开放的，允许访问集群中任意节点的 IP 地址。
- 所有用户都可以在无需密码的情况下访问集群。
- 所有用户都可以以 root 用户身份访问集群，并对所有数据进行读写操作。
- 缺乏网络加密和认证机制，使得数据传输容易受到威胁。

因此，KWDB 强烈建议采用安全模式部署集群，通过 TLS 加密技术验证节点和客户端的身份，并对节点与客户端之间的数据传输进行加密，有效防范未经授权的访问和数据篡改。
