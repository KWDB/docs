---
title: 3.1.0 发版说明
id: 3.1.0-release-notes
---

# KWDB 3.1.0 发版说明

KWDB 是一款面向 AIoT 物联网场景的分布式、多模融合的数据库产品，支持在同一实例同时创建时序库和关系库，并融合处理多模数据，具备千万级设备接入、百万级数据秒级写入、亿级数据秒级读取等时序数据高效处理能力，具有稳定安全、高可用、易运维等特点。面向工业物联网、数字能源、车联网、智慧产业等领域，提供一站式数据存储、管理与分析的基座。

KWDB 3.1.0 版本在保持原有特性的基础上，针对数据库对象、数据写入与查询、数据库运维与安全、数据库稳定性、数据库性能等进行了全面优化与增强。

## 版本信息

| 版本号 | 日期 |
|--------|------|
| 3.1.0  | 2026.xx.xx |

## 新增特性

### 数据库对象管理

#### 创建时序库表增强

- 创建时序库/时序表支持 `IF NOT EXISTS` 语句，避免重复创建报错
- 支持创建时序库时自定义时间分区间隔（默认 10 天），时序表继承所属数据库的配置

#### 存储过程优化

- 支持在存储过程中设置自定义变量
- 支持在存储过程中使用 `PREPARE`、`EXECUTE`、`DEALLOCATE` 语句

### 数据写入与处理

#### 数据去重策略

- 支持将数据去重策略设置为 `merge` 模式，对同一设备相同时间戳的数据进行去重和整合处理，适用于数据源重复写入、多路采集等场景

#### 时序数据性能优化

- 新增 Raft Log 专用存储引擎，提升机械硬盘读写性能

#### 时序数据压缩管理

- 新增 `ts.compress.last_segment.enabled` 参数，用于控制是否对 last segment (最新数据段) 启用压缩
- 新增 `ts.compress.stage` 参数，用于控制时序数据的压缩层级，支持不压缩、一级压缩、二级压缩
- 新增 `SHOW DISTRIBUTION` 语句，用于查看指定时序数据库或时序表的存储空间和压缩比例

### 数据查询与分析

#### 查询性能优化

- 新增 `ts.last_cache_size.max_limit` 集群参数，设置时序数据 `last_row()` 读缓存功能的内存限制，提升 `last()` 和 `last_row()` 查询响应速度

#### 连接能力提升

- 最大并发连接数提升至 50,000

#### SQL 函数增强

- 新增 `to_timestamp()` 函数，用于将时间戳格式转换为时间格式

### 运维与管理

#### 集群运维

- 支持通过部署脚本进行多副本集群的扩缩容操作
- 支持通过 `VACUUM TS DATABASES` SQL 命令手动触发重组操作，立即释放存储空间或优化查询性能

#### 任务管理

- `SHOW JOBS` 命令支持显示流计算相关信息

### 安全与审计

#### 审计功能增强

- `DATABASE`、`TABLE`、`INDEX`、`JOB`、`SCHEDULE` 对象操作由语句级审计升级为系统级审计，添加到默认审计策略

## 重要变更

### 安装部署

#### 安装部署脚本优化

- **部署时配置确认机制**：将 `deploy.cfg` 配置文件信息汇总并在终端展示，用户确认后方可继续安装，否则取消安装
- **新增便捷运维脚本**：安装时生成 `kw-status.sh` 和 `kw-sql.sh` 脚本，用于查看集群状态和连接数据库
- **卸载优化**：卸载数据库时支持保留证书

#### 快速部署脚本

- 新增快速部署脚本 `quick_deploy.sh`，用户运行脚本后，系统将自动完成系统检测、参数配置、安装包下载和部署全流程

### 操作系统和环境

- 新增麒麟 V10 SP3 2303 裸机部署支持

### 开发工具

#### KaiwuDB 开发者中心

- 支持 BLOB 和 CLOB 大对象数据类型

### 生态兼容

#### KaiwuDB JDBC Driver

- 升级至安全版本，消除安全风险；支持更多数据类型

## 升级说明

- **多副本集群**：支持 KWDB 3.0.0 离线升级至 3.1.0
- **单副本集群**：支持 KWDB 3.0.0 离线升级至 3.1.0
- **单机版本**：支持 KWDB 3.0.0 离线升级至 3.1.0
- **KWDB 2.x 版本**：支持通过导入导出方式升级至 3.1.0

相关信息见[数据库升级](../db-operation/db-upgrade.md)、[数据导出](../db-administration/import-export-data/export-data.md)和[数据导入](../db-administration/import-export-data/import-data.md)。
